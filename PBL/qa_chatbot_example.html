<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>안전 PBL - 챗봇 질의응답 예시</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="flex h-screen bg-gray-100 justify-center items-center">
    <!-- 챗봇 인터페이스 -->
    <div class="w-96 bg-white shadow-lg rounded-lg flex flex-col">
      <div
        class="bg-blue-500 text-white p-3 rounded-t-lg flex justify-between items-center"
      >
        <span class="font-bold">안전 챗봇</span>
        <button id="chat-close" class="text-xl leading-none">✕</button>
      </div>
      <div
        id="chat-window"
        class="p-3 h-80 overflow-y-auto flex flex-col-reverse space-y-2 space-y-reverse bg-gray-50"
      >
        <!-- 예시 대화 -->
        <div class="self-start bg-white text-left p-2 rounded shadow">
          ○○구의 사고 건수는 120건입니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          ○○구 사고 건수 알려줘
        </div>
        <div class="self-start bg-white text-left p-2 rounded shadow">
          2024년 기준 강남동이 85건으로 가장 사고가 많습니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          가장 사고 많은 동은?
        </div>
        <div class="self-start bg-white text-left p-2 rounded shadow">
          서울시에는 총 5,000개의 보행등이 설치되어 있습니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          서울시 보행등 개수는?
        </div>
        <div class="self-start bg-white text-left p-2 rounded shadow">
          ○○구의 야간 사고 건수는 45건입니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          ○○구 야간 사고 건수 알려줘
        </div>
        <div class="self-start bg-white text-left p-2 rounded shadow">
          반경 500m 보행등 개수는 12개입니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          반경 500m 보행등 개수?
        </div>
        <div class="self-start bg-white text-left p-2 rounded shadow">
          주말 사고 비율은 30%입니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          주말 사고 비율 알려줘
        </div>
        <div class="self-start bg-white text-left p-2 rounded shadow">
          2024년 사고 건수는 10% 증가했습니다.
        </div>
        <div class="self-end bg-blue-100 text-right p-2 rounded">
          2023년 대비 2024년 사고 건수 비교?
        </div>
      </div>
      <div class="p-3 border-t flex">
        <input
          id="chat-input"
          type="text"
          placeholder="질문을 입력하세요..."
          class="flex-1 p-2 border rounded-l focus:outline-none focus:ring"
        />
        <button
          id="chat-send"
          class="px-4 bg-blue-500 text-white rounded-r hover:bg-blue-600"
        >
          전송
        </button>
      </div>
    </div>

    <!-- 챗봇 스크립트 예시 -->
    <script>
      const chatWindow = document.getElementById("chat-window");
      const chatInput = document.getElementById("chat-input");
      const chatSend = document.getElementById("chat-send");

      function appendMessage(text, sender) {
        const msg = document.createElement("div");
        msg.className =
          sender === "user"
            ? "self-end bg-blue-100 text-right p-2 rounded"
            : "self-start bg-white text-left p-2 rounded shadow";
        msg.innerText = text;
        chatWindow.prepend(msg);
      }

      chatSend.addEventListener("click", () => {
        const text = chatInput.value.trim();
        if (!text) return;
        appendMessage(text, "user");
        chatInput.value = "";
        // TODO: API 호출 및 응답 처리
        setTimeout(() => {
          appendMessage("챗봇 응답 예시: " + text, "bot");
        }, 500);
      });

      chatInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") chatSend.click();
      });
    </script>
  </body>
</html>
